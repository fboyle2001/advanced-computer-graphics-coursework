<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ACG Coursework</title>
        <link href="style.css" rel="stylesheet" />
        <style>
            * {
                margin: 0;
                padding: 0;
            } 
        </style>
        <script>
            let logOpen = false;

            const onToggleLog = () => {
                logOpen = !logOpen;
                document.getElementById("show_log").innerHTML = `${logOpen ? "Hide" : "Show"} Log`;
                document.getElementById("log_output").style.display = logOpen ? "flex" : "none";

                if(logOpen) {
                    document.getElementById("log_output").scrollTo(0, document.getElementById("log_output").scrollTop)
                }
            }

            const setSettingsVisibility = (open) => {
                document.getElementById("settings_panel").style.display = open ? "flex" : "none";
            }
        </script>
    </head>
    <body style="font-family: Arial, sans-serif;">
        <script type="module" src="bundle.js"></script>
        <div 
            style="
                position: absolute; top: 0; right: 0; max-width: 20%; height: 100%;
                display: flex; flex-direction: column; justify-content: space-between;
            "
        >
            <div style="
                display: flex; flex-direction: column;
                border-left: 0.1rem solid; border-bottom: 0.1rem solid; border-color: aqua; padding: 0.2rem;
                background-color: rgba(0, 0, 0, 0.8); color: white; 
                width: fit-content;
                margin-left: auto;
            ">
                <span style="display: block;">Polygons: <span id="polygon_count"></span>
                <span style="display: block;">Textures: <span id="texture_count"></span>
                <span style="display: block;">Geometries: <span id="geometry_count"></span>
                <span style="display: block;">Calls: <span id="calls_count"></span>
            </div>
            <div 
                style="
                    display: flex; flex-direction: column;
                    border-left: 0.1rem solid; border-top: 0.1rem solid; border-color: aqua; padding: 0.2rem;
                    background-color: rgba(0, 0, 0, 0.8); color: white;
                    width: fit-content;
                    margin-left: auto;
                    max-height: 35%;
                "
            >
                <button 
                    onclick="javascript:setSettingsVisibility(true)"
                >Open Settings</button>
                <button 
                    id="show_log"
                    style="min-width: 6rem;"
                    onclick="javascript:onToggleLog()"
                >Show Log</button>
                <div
                    id="log_output"
                    style="
                        display: none; flex-direction: column;
                        width: 100%;
                        margin-top: 0.3rem; margin-right: 0.2rem;
                        overflow-y: scroll;
                        font-size: small;
                    "
                ></div>
            </div>

        </div>
        <div
            style="
                position: absolute; width: 100%; height: 100%;
                display: none; flex-direction: column; justify-content: center; align-items: center;
            "
            id="settings_panel"
        >
            <div
                style="
                    width: 85%; height: 85%;
                    border: 0.1rem aqua solid;
                    background-color: rgba(245, 245, 245, 0.6);
                    padding: 1rem;
                    display: flex; flex-direction: column; align-items: center;
                "
            >
                <h1 style="font-weight: 700; font-size: xx-large; margin-bottom: 0.2rem;">Visual Control Settings</h1>
                <div style="width: 60%; border: 0.1rem solid black; margin-bottom: 0.2rem; padding: 0.1rem;">
                    <h2 style="font-weight: 600; font-size: x-large;">Dynamic Control</h2>
                    <span>Set target framerate; locks all other settings; presets?</span><br />
                </div>
                <div style="width: 60%; border: 0.1rem solid black; margin-bottom: 0.2rem; padding: 0.1rem;">
                    <h2 style="font-weight: 600; font-size: x-large;">Render Quality</h2>
                    <div style="display: flex; flex-direction: row;">
                        <h3>Render Distance</h3>
                        <select
                            id="render_distance"
                        >
                            <option value="20">Low (20 units)</option>
                            <option value="200">Medium (200 units)</option>
                            <option value="1000">High (1000 units)</option>
                        </select>
                    </div>
                    <div style="display: flex; flex-direction: row;">
                        <h3>Anti-Aliasing</h3>
                        <select
                            id="aa_type"
                        >
                            <option value="disabled">Disabled</option>
                            <option value="fxaa">FXAA</option>
                            <!-- <option value="ssaa">SSAA</option> -->
                            <option value="smaa">SMAA</option>
                        </select>
                    </div>
                    <div style="display: flex; flex-direction: row;">
                        <h3>Material Quality</h3>
                        <select
                            id="material_quality"
                        >
                            <option value="highest">Highest (MeshStandardMaterial)</option>
                            <option value="high">High (MeshPhongMaterial)</option>
                            <option value="medium">Medium (MeshLambertMaterial)</option>
                            <option value="lowest">Lowest (MeshBasicMaterial)</option>
                        </select>
                    </div>
                    <div style="display: flex; flex-direction: row;">
                        <h3>Animation Quality</h3>
                        <select
                            id="animation_quality"
                        >
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low (Update every 8 frames)</option>
                        </select>
                    </div>
                    <div style="display: flex; flex-direction: row;">
                        <h3>Non-LOD Parametric Surface Samples</h3>
                        <input 
                            type="number"
                            id="fixed_samples"
                            value="0"
                        />
                    </div>
                    <h3>Level of Detail</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Setting</th>
                                <th>Low Quality</th>
                                <th>Medium Quality</th>
                                <th>High Quality</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Trigger Distance</td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_low_distance"
                                        value="0"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_medium_distance"
                                        value="0"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_high_distance"
                                        value="0"
                                    />
                                </td>
                            </tr>
                            <tr>
                                <td>Surface Samples</td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_low_surface_samples"
                                        value="0"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_medium_surface_samples"
                                        value="0"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_high_surface_samples"
                                        value="0"
                                    />
                                </td>
                            </tr>
                            <tr>
                                <td>Frames per Animation Update</td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_low_animation_frames"
                                        value="0"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_medium_animation_frames"
                                        value="0"
                                    />
                                </td>
                                <td>
                                    <input 
                                        type="number"
                                        id="lod_high_animation_frames"
                                        value="0"
                                    />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="width: 60%; border: 0.1rem solid black; margin-bottom: 0.2rem; padding: 0.1rem;">
                    <h2 style="font-weight: 600; font-size: x-large;">Additional Settings</h2>
                    <span>Network quality</span><br />
                </div>
                <button
                    id="save_settings"
                    onclick="javascript:setSettingsVisibility(false)"
                >Save and Close Settings</button>
            </div>
        </div>
    </body>
</html>